<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hades Defense System - Live Demo</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --c-bg: #020617;
            --c-term: #0f172a;
            --c-acc: #ef4444;
            --c-text: #e2e8f0;
        }

        body {
            margin: 0;
            background: var(--c-bg);
            color: var(--c-text);
            font-family: 'Courier New', monospace;
            overflow: hidden;
            display: flex;
            height: 100vh;
        }

        /* Mobile Toggle */
        .menu-toggle {
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 200;
            background: var(--c-term);
            border: 1px solid #334155;
            color: #fff;
            padding: 8px;
            border-radius: 4px;
            display: none;
            cursor: pointer;
        }

        .sidebar {
            background: var(--c-term);
            border-right: 1px solid #334155;
            padding: 1rem;
            width: 250px;
            flex-shrink: 0;
            transition: transform 0.3s;
            z-index: 100;
            display: flex;
            flex-direction: column;
        }

        .main {
            position: relative;
            display: flex;
            flex-direction: column;
            flex: 1;
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                height: 100%;
                transform: translateX(-100%);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .menu-toggle {
                display: block;
            }

            .dashboard {
                grid-template-columns: 1fr;
            }

            .logs {
                display: none;
            }

            /* Hide logs on mobile to save space */
        }

        .top-bar {
            height: 60px;
            border-bottom: 1px solid #334155;
            display: flex;
            align-items: center;
            padding: 0 2rem;
            justify-content: space-between;
            background: rgba(15, 23, 42, 0.9);
            padding-left: 60px;
            /* Space for toggle */
        }

        .map-area {
            flex: 1;
            background: radial-gradient(circle at center, #1e293b 0%, #020617 100%);
            position: relative;
            overflow: hidden;
        }

        .logs {
            background: var(--c-term);
            border-left: 1px solid #334155;
            padding: 1rem;
            font-size: 0.8rem;
            overflow-y: auto;
            width: 300px;
            flex-shrink: 0;
        }

        .nav-item {
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            gap: 10px;
            align-items: center;
            opacity: 0.7;
        }

        .nav-item.active {
            background: rgba(239, 68, 68, 0.1);
            color: var(--c-acc);
            opacity: 1;
            border-left: 3px solid var(--c-acc);
        }

        .nav-item:hover {
            opacity: 1;
            background: rgba(255, 255, 255, 0.05);
        }

        .log-entry {
            margin-bottom: 8px;
            font-family: monospace;
            border-bottom: 1px solid #334155;
            padding-bottom: 4px;
        }

        .log-time {
            color: #94a3b8;
            margin-right: 8px;
        }

        .log-crit {
            color: #ef4444;
            font-weight: bold;
        }

        .log-info {
            color: #3b82f6;
        }

        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }


        .back-btn {
            position: fixed;
            bottom: 30px;
            left: 30px;
            /* Moved to left for better UX */
            background: rgba(15, 23, 42, 0.8);
            color: #ef4444;
            border: 1px solid #ef4444;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            z-index: 1000;
            backdrop-filter: blur(5px);
            display: flex;
            gap: 10px;
            align-items: center;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .back-btn:hover {
            background: #ef4444;
            color: #000;
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.4);
        }


        .status-badge {
            padding: 4px 12px;
            border-radius: 99px;
            background: rgba(34, 197, 94, 0.1);
            color: #22c55e;
            border: 1px solid #22c55e;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
        }

        .status-badge.alert {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
            border-color: #ef4444;
            animation: pulse 1s infinite;
        }

        .blink {
            animation: blink 1s infinite;
            width: 8px;
            height: 8px;
            background: currentColor;
            border-radius: 50%;
            display: inline-block;
        }

        @keyframes blink {
            50% {
                opacity: 0.2;
            }
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
            }
        }

        .control-panel {
            margin-top: auto;
            border-top: 1px solid #334155;
            padding-top: 1rem;
        }

        .btn-action {
            width: 100%;
            padding: 10px;
            background: #1e293b;
            border: 1px solid #334155;
            color: #fff;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Courier New';
            font-weight: bold;
        }

        .btn-action:hover {
            background: #334155;
        }

        .btn-action.danger {
            border-color: #ef4444;
            color: #ef4444;
        }

        .btn-action.danger:hover {
            background: #ef4444;
            color: #fff;
        }

        .overlay-alert {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #ef4444;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s;

            z-index: 50;
            mix-blend-mode: overlay;
        }

        .toast {
            visibility: hidden;
            min-width: 250px;
            background-color: var(--c-term);
            color: var(--c-text);
            text-align: center;
            border-radius: 4px;
            padding: 16px;
            position: fixed;
            z-index: 10000;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%);
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.2);
            border: 1px solid var(--c-acc);
            opacity: 0;
            transition: opacity 0.3s, bottom 0.3s;
            font-family: 'Courier New', monospace;
        }

        .toast.show {
            visibility: visible;
            opacity: 1;
            bottom: 50px;
        }
    </style>
</head>


<body>

    <button class="menu-toggle" onclick="document.querySelector('.sidebar').classList.toggle('open')">
        <i data-lucide="menu"></i>
    </button>

    <div class="sidebar">
        <h2 style="display:flex; align-items:center; gap:10px; color:var(--c-acc); margin-bottom: 2rem;"><i
                data-lucide="shield-alert"></i> HADES</h2>
        <div class="nav-item active"><i data-lucide="activity"></i> Monitoramento</div>
        <div class="nav-item"><i data-lucide="globe"></i> Mapa de Amea√ßas</div>
        <div class="nav-item"><i data-lucide="lock"></i> Firewall Rules</div>
        <div class="nav-item"><i data-lucide="database"></i> Data Vault</div>

        <div class="control-panel">
            <div style="font-size:0.7rem; color:#64748b; margin-bottom:10px;">QUICK ACTIONS</div>
            <button class="btn-action" onclick="flushDNS()">FLUSH DNS</button>
            <button class="btn-action danger" onclick="triggerLockdown()">LOCKDOWN MODE</button>
        </div>
    </div>

    <div class="main">
        <div class="overlay-alert" id="redAlert"></div>
        <div class="top-bar">
            <span>Threat Level: <strong id="threatLevel">MODERATE</strong></span>
            <div class="status-badge" id="sysStatus"><span class="blink"></span> SYSTEM PROTECTED</div>
        </div>
        <div class="map-area" id="mapContainer">
            <canvas id="cyberMap"></canvas>
            <div style="position: absolute; top: 20px; left: 20px; pointer-events: none;">
                <h3>Live Attack Feed</h3>
                <div style="font-size: 2rem; font-weight: bold;" id="attackCount">0</div>
                <div style="font-size: 0.8rem; color: #94a3b8;">Threats Neutralized</div>
            </div>
        </div>
    </div>

    <div class="logs" id="logFeed">
        <h3>Real-time Logs</h3>
        <!-- JS fills this -->
    </div>

    <a href="../index.html" class="back-btn"><i data-lucide="arrow-left"></i> Voltar</a>

    <script>
        lucide.createIcons();

        // Canvas Cyber Effect
        const canvas = document.getElementById('cyberMap');
        const ctx = canvas.getContext('2d');
        let width, height;
        let particles = [];
        const attacks = [];

        function resize() {
            width = canvas.width = document.querySelector('.map-area').clientWidth;
            height = canvas.height = document.querySelector('.map-area').clientHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        class Particle {
            constructor() {
                this.reset();
            }
            reset() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.size = Math.random() * 2;
                this.color = Math.random() > 0.9 ? '#ef4444' : '#3b82f6';
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                if (this.x < 0 || this.x > width || this.y < 0 || this.y > height) this.reset();
            }
            draw() {
                ctx.fillStyle = this.color;
                ctx.globalAlpha = 0.6;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        for (let i = 0; i < 50; i++) particles.push(new Particle());

        function addLog(text, type = 'info') {
            const feed = document.getElementById('logFeed');
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            const time = new Date().toLocaleTimeString();
            entry.innerHTML = `<span class="log-time">[${time}]</span> <span class="log-${type}">${text}</span>`;
            feed.prepend(entry);
            if (feed.children.length > 20) feed.lastChild.remove();
        }

        let attackCounter = 0;
        const countDisplay = document.getElementById('attackCount');

        function animate() {
            ctx.clearRect(0, 0, width, height);

            ctx.strokeStyle = 'rgba(59, 130, 246, 0.1)';
            particles.forEach((p, i) => {
                p.update();
                p.draw();
                particles.slice(i + 1).forEach(p2 => {
                    const dx = p.x - p2.x;
                    const dy = p.y - p2.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    if (dist < 100) {
                        ctx.beginPath();
                        ctx.moveTo(p.x, p.y);
                        ctx.lineTo(p2.x, p2.y);
                        ctx.stroke();
                    }
                });
            });

            // Simulating Attacks
            if (Math.random() < 0.05) {
                const source = particles[Math.floor(Math.random() * particles.length)];
                const target = particles[Math.floor(Math.random() * particles.length)];

                ctx.strokeStyle = '#ef4444';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(source.x, source.y);
                ctx.lineTo(target.x, target.y);
                ctx.stroke();
                ctx.lineWidth = 1;

                attackCounter++;
                countDisplay.innerText = attackCounter;

                const ips = `192.168.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`;
                addLog(`Inbound packet dropped from ${ips}`, 'crit');
            }

            requestAnimationFrame(animate);
        }

        animate();

        // Auto logs
        setInterval(() => {
            const msgs = ["Port scan detected", "Firewall rules updated", "Encryption key rotated", "User session verified", "Traffic analysis complete"];
            addLog(msgs[Math.floor(Math.random() * msgs.length)], 'info');
        }, 2000);

        // Interactive Functions
        function flushDNS() {
            particles = []; // Clear map
            setTimeout(() => {
                for (let i = 0; i < 50; i++) particles.push(new Particle());
            }, 500);
            addLog("DNS FLUSH INITIATED...", "info");
            addLog("CACHE CLEARED.", "info");
        }

        function triggerLockdown() {
            const alertOverlay = document.getElementById('redAlert');
            const badge = document.getElementById('sysStatus');

            alertOverlay.style.opacity = 1;
            badge.classList.add('alert');
            badge.innerHTML = "<span class='blink'></span> LOCKDOWN ACTIVE";
            document.getElementById('threatLevel').innerText = "CRITICAL";
            document.getElementById('threatLevel').style.color = "#ef4444";

            addLog("!!! LOCKDOWN SEQUENCE INITIATED !!!", "crit");
            addLog("ALL PORTS CLOSED.", "crit");

            setTimeout(() => {
                alertOverlay.style.opacity = 0;
                badge.classList.remove('alert');
                badge.innerHTML = "<span class='blink'></span> SYSTEM PROTECTED";
                document.getElementById('threatLevel').innerText = "MODERATE";
                document.getElementById('threatLevel').style.color = "inherit";
                addLog("System normalized.", "info");
            }, 5000);
        }



    </script>

    <!-- Toast -->
    <div id="toast" class="toast">SYSTEM ALERT</div>

    <script>
        function showToast(message) {
            const toast = document.getElementById("toast");
            toast.textContent = `[SYSTEM]: ${message}`;
            toast.className = "toast show";
            setTimeout(() => { toast.className = toast.className.replace("show", ""); }, 3000);
        }
    </script>
</body>

</html>